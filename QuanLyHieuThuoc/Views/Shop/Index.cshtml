@model IEnumerable<QuanLyHieuThuoc.Models.Entity.Thuoc>

@{
    ViewData["Title"] = "Danh Mục Dược Phẩm";
}

<style>
    body {
        background-color: #0d1a26 !important;
        font-family: 'Consolas', monospace;
        color: #00ffcc;
    }

    .shop-container {
        padding: 50px 0;
        min-height: 100vh;
    }

    h1.page-title {
        text-align: center;
        font-size: 2.5rem;
        text-shadow: 0 0 25px #00ffff;
        color: #00ffff;
        margin-bottom: 10px;
    }

    p.subtext {
        text-align: center;
        color: #00ffcc;
        margin-bottom: 40px;
    }

    /* --- KHỐI DANH MỤC --- */
    .category-section {
        margin-bottom: 60px;
        padding: 20px 40px;
    }

    .category-title {
        font-size: 1.8rem;
        color: #00ffff;
        text-shadow: 0 0 15px #00ffff;
        margin-bottom: 25px;
        text-align: left;
        border-left: 5px solid #00ffff;
        padding-left: 15px;
    }

    /* --- GRID SẢN PHẨM --- */
    .drug-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
    }

    .drug-card {
        background: rgba(1, 25, 35, 0.8);
        border: 1px solid #00ffff;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        padding: 20px;
        transition: 0.3s ease;
    }

        .drug-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px #00ffff;
            border-color: #00ffcc;
        }

    .drug-name {
        color: #88ffff;
        font-weight: bold;
        font-size: 1.2rem;
        margin-bottom: 10px;
    }

    .drug-price {
        color: #00ff00;
        font-size: 1.1rem;
        font-weight: bold;
        margin-top: 10px;
    }

    .drug-stock {
        color: #ffcc00;
        font-size: 0.9rem;
        margin-top: 5px;
    }

    .btn-view {
        background: #00ffcc;
        color: #0d1a26;
        border: none;
        border-radius: 5px;
        padding: 10px 15px;
        text-decoration: none;
        font-weight: bold;
        box-shadow: 0 0 10px rgba(0, 255, 204, 0.5);
        transition: 0.3s;
    }

        .btn-view:hover {
            background: #00ffaa;
            box-shadow: 0 0 20px #00ffaa;
        }

</style>

<div class="shop-container container">
    <h1 class="page-title">DANH MỤC DƯỢC PHẨM</h1>
    <p class="subtext">Tổng cộng @Model.Count() sản phẩm đang được bán.</p>

    <form asp-controller="Shop" asp-action="Index" method="get" class="mb-5 mt-4 d-flex justify-content-center">
        <div class="input-group" style="max-width: 500px;">
            <input type="text" name="searchString" class="form-control"
                   placeholder="Tìm kiếm theo tên thuốc..."
                   value="@ViewData["CurrentSearchString"]" />

            <button class="btn btn-primary" type="submit" style="background:#00ffff; border-color:#00ffff; color:#0d1a26;">
                Tìm
            </button>
            <a asp-controller="Shop" asp-action="Index" class="btn btn-secondary" style="background:none; border-color:#00ffcc; color:#00ffcc;">Xóa</a>
        </div>
    </form>

    @* --- PHÂN LOẠI THEO DANH MỤC --- *@
    @foreach (var group in Model.GroupBy(t => t.LoaiThuoc?.TenLoaiThuoc ?? "Không phân loại"))
    {
        <div class="category-section">
            <h2 class="category-title">@group.Key</h2>
            <div class="drug-grid">
                @foreach (var item in group)
                {
                    <div class="drug-card">
                        <div class="drug-name">@item.TenThuoc</div>
                        <div class="drug-stock">Loại: @item.LoaiThuoc?.TenLoaiThuoc  </div>
                        <div class="drug-price">@item.GiaBan.ToString("N0") VNĐ</div>

                        <div class="mt-4 d-flex justify-content-between">
                            <a asp-controller="Shop" asp-action="Details" asp-route-id="@item.ThuocId" class="btn-view">XEM</a>
                            <a class="btn-view" style="background-color:#ff9900; color:#0d1a26; box-shadow: 0 0 10px rgba(255, 153, 0, 0.5);">MUA</a>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>
